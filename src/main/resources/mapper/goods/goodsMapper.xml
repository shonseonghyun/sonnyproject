<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="goods">

	<insert id="registerGoods">
		insert into goods(gds_name,gds_writer_id,gds_price,gds_descr,picture_url)
		values(#{gds_name},#{gds_writer_id},#{gds_price},#{gds_descr},#{picture_url})
	</insert>
	
	<select id="getAlllist" resultType="webprj.dto.goods.GoodsDTO"> 
		select * from goods 
	</select>
	
	<select id="getlist" resultType="webprj.dto.goods.GoodsDTO">
		select * from goods where gds_id=#{id}
	</select>
	
	<insert id="order">
		insert into cart(id,gds_id,amount) values(#{id},#{gds_id},#{amount})
	</insert>
	
	<select id="getOrderList" resultType="webprj.dto.cart.CartDTO">
		select c.gds_id,g.gds_price,sum(c.amount),(g.gds_price * sum(c.amount)) total
		from cart c join goods g on c.gds_id= g.gds_id where id=#{id}
		group by c.gds_id,g.gds_price
	</select>
</mapper>